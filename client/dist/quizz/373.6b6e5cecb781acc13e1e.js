(self.webpackChunkquizz=self.webpackChunkquizz||[]).push([[373],{1836:(e,t,i)=>{"use strict";i.d(t,{t:()=>n});const n=e=>{const t=e.get("password").value,i=e.get("confirmPassword").value;return t===i&&t.length>0&&i.length>0?null:{notSame:!0}}},2170:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var n=i(665),s=i(1836),r=i(639),o=i(7764),a=i(1320),d=i(5806),l=i(8583),u=i(9573),c=i(2481),m=i(568);function p(e,t){if(1&e&&(r.TgZ(0,"div",6),r.TgZ(1,"label"),r._uU(2),r.qZA(),r._UZ(3,"reg-input",7),r.qZA()),2&e){const e=t.$implicit,i=t.index,n=r.oxw();r.xp6(1),r.uIk("for",e.key),r.xp6(1),r.Oqu(n.passLabel[i]),r.xp6(1),r.Q6J("parentForm",n.modifyPasswordForm)("parentControlName",e.key)("width",200)("type","password")("solo",!1),r.uIk("id",e.key)}}let g=(()=>{class e{constructor(e,t,i,r,o){this.fb=e,this.request=t,this.alert=i,this.route=r,this.router=o,this.mailToken="",this.userId="",this.modifyPasswordForm=this.fb.group({password:["",[n.kI.required,n.kI.minLength(6)]],confirmPassword:["",[n.kI.required,n.kI.minLength(6)]]},{validator:s.t}),this.isLoading=!1,this.passLabel=["Nouveau mot de passe","Confirmation mot de passe"]}ngOnInit(){this.getMailToken(),this.getUserInfo()}getMailToken(){this.route.params.subscribe(e=>{e.token&&(this.mailToken=e.token)})}getUserInfo(){this.request.get("users/info").subscribe(e=>{this.userId=e._id})}trackByFn(e,t){return e}unsorted(){return 0}onSubmit(){this.isLoading=!0,this.request.post("users/password",{password:this.modifyPasswordForm.value.password,token:this.mailToken,id:this.userId}).subscribe({next:e=>{this.isLoading=!1,this.alert.message="Mot de passe correctement modifi\xe9",this.alert.switchAlert(),this.mailToken&&this.router.navigate(["/user/login"])},error:e=>{this.isLoading=!1,this.alert.message="Probleme lors de la modification du mot de passe",this.alert.switchAlert()}})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(n.qu),r.Y36(o.s),r.Y36(a.c),r.Y36(d.gz),r.Y36(d.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-modify-password"]],decls:9,vars:11,consts:[[1,"modifyPassword"],[3,"formGroup","submit"],["class","modifyProfile_formRepeat",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modifyPassword_validation"],[3,"size","isDisplayed"],[3,"label","disabled","type"],[1,"modifyProfile_formRepeat"],[3,"parentForm","parentControlName","width","type","solo"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"h2"),r._uU(2,"Reinitialiser mon mot de passe"),r.qZA(),r.TgZ(3,"form",1),r.NdJ("submit",function(){return t.onSubmit()}),r.YNc(4,p,4,8,"div",2),r.ALo(5,"keyvalue"),r.TgZ(6,"div",3),r._UZ(7,"reg-spinner",4),r._UZ(8,"reg-button",5),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",t.modifyPasswordForm),r.xp6(1),r.Q6J("ngForOf",r.xi3(5,8,t.modifyPasswordForm.value,t.unsorted))("ngForTrackBy",t.trackByFn),r.xp6(3),r.Q6J("size",20)("isDisplayed",t.isLoading),r.xp6(1),r.Q6J("label","Reinitialiser")("disabled",!t.modifyPasswordForm.valid)("type","submit"))},directives:[n._Y,n.JL,n.sg,l.sg,u.q,c.m,m.H],pipes:[l.Nd],styles:["[_ngcontent-%COMP%]:root{--game-size:400px}@media screen and (max-width: 800px){[_ngcontent-%COMP%]:root{--game-size:100%}}.modifyPassword[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modifyPassword[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px}.modifyPassword[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#4bc0b8;border-radius:5px;padding:10px;display:flex;flex-direction:column;align-items:flex-sa}.modifyPassword[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px}.modifyPassword_validation[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:relative}.modifyPassword_inputs[_ngcontent-%COMP%]{display:flex}"]}),e})()},8373:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UserModule:()=>q});var n=i(8583),s=i(4762),r=i(5806),o=i(639),a=i(1860);let d=(()=>{class e{constructor(e){this.auth=e}canActivate(){return this.auth.checkAuth()}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.g))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i(665),u=i(7764),c=i(362),m=i(1320),p=i(9573),g=i(2481),f=i(568);function h(e,t){if(1&e&&(o.TgZ(0,"div",7),o.TgZ(1,"label"),o._uU(2),o.qZA(),o._UZ(3,"reg-input",8),o.qZA()),2&e){const e=t.$implicit,i=t.index,n=o.oxw();o.xp6(1),o.uIk("for",e.key),o.xp6(1),o.Oqu(n.label[i]),o.xp6(1),o.Q6J("parentForm",n.loginForm)("parentControlName",e.key)("width",200)("type","password"===e.key?"password":"text")("solo","password"!==e.key),o.uIk("id",e.key)}}const b=function(){return["/user/retrieve"]};let y=(()=>{class e{constructor(e,t,i,n,s){this.fb=e,this.request=t,this.router=i,this.routeHistory=n,this.alert=s,this.loginForm=this.fb.group({username:["",[l.kI.minLength(2),l.kI.required]],password:["",[l.kI.required,l.kI.minLength(6)]]}),this.htmlLoginForm={},this.label=["Nom d'utilisateur","Mot de passe"],this.isLoading=!1}notSorted(){return 0}onSubmit(){const e=Object.assign({},this.loginForm.value);for(const t in e)e[t]=e[t].trim();this.isLoading=!0,this.request.post("users/login",e).subscribe({next:()=>{this.isLoading=!1;let e=this.routeHistory.getPrevious();/subscribe/.test(e)&&(e=""),/change-password/.test(e)&&(e=""),/retrieve/.test(e)&&(e=""),this.router.navigate(["/"+e])},error:e=>{this.isLoading=!1,this.alert.message=e.error,this.alert.switchAlert()}})}ngOnInit(){this.htmlLoginForm=Object.assign({},this.loginForm.value)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.qu),o.Y36(u.s),o.Y36(r.F0),o.Y36(c.H),o.Y36(m.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:12,vars:11,consts:[[1,"user"],[3,"formGroup","submit"],["class","user_formRepeat",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"user_validSpinn"],[3,"size","isDisplayed"],[3,"type","disabled"],[1,"user_formRepeat"],[3,"parentForm","parentControlName","width","type","solo"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h2"),o._uU(2,"Se connecter"),o.qZA(),o.TgZ(3,"form",1),o.NdJ("submit",function(){return t.onSubmit()}),o.YNc(4,h,4,8,"div",2),o.ALo(5,"keyvalue"),o.TgZ(6,"a",3),o._uU(7,"Mot de passe oubli\xe9"),o.qZA(),o.TgZ(8,"div",4),o._UZ(9,"reg-spinner",5),o.TgZ(10,"reg-button",6),o._uU(11,"Login"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("formGroup",t.loginForm),o.xp6(1),o.Q6J("ngForOf",o.xi3(5,7,t.htmlLoginForm,t.notSorted)),o.xp6(2),o.Q6J("routerLink",o.DdM(10,b)),o.xp6(3),o.Q6J("size",20)("isDisplayed",t.isLoading),o.xp6(1),o.Q6J("type","submit")("disabled",!t.loginForm.valid))},directives:[l._Y,l.JL,l.sg,n.sg,r.yS,p.q,g.m,f.H],pipes:[n.Nd],styles:["[_ngcontent-%COMP%]:root{--game-size:400px}@media screen and (max-width: 800px){[_ngcontent-%COMP%]:root{--game-size:100%}}.user[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px}.user_validSpinn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:relative}.user[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#4bc0b8;border-radius:5px;padding:10px;display:flex;flex-direction:column;align-items:flex-sa}.user[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px}"]}),e})();var x=i(2170);function v(e,t){if(1&e&&(o.TgZ(0,"div",6),o.TgZ(1,"label"),o._uU(2),o.qZA(),o._UZ(3,"reg-input",7),o.qZA()),2&e){const e=t.$implicit,i=t.index,n=o.oxw();o.xp6(1),o.uIk("for",e.key),o.xp6(1),o.Oqu(n.label[i]),o.xp6(1),o.Q6J("parentForm",n.retrieveForm)("parentControlName",e.key)("width",200)("type","password"===e.key?"password":"text")("solo","password"!==e.key),o.uIk("id",e.key)}}let w=(()=>{class e{constructor(e,t,i,n,s){this.fb=e,this.request=t,this.alert=i,this.router=n,this.routeHistory=s,this.retrieveForm=this.fb.group({email:["",[l.kI.minLength(2),l.kI.required,l.kI.email]]}),this.htmlLoginForm={},this.label=["E mail"],this.isLoading=!1}ngOnInit(){this.htmlLoginForm=Object.assign({},this.retrieveForm.value)}onSubmit(){const e=Object.assign({},this.retrieveForm.value);e.email=e.email.trim(),this.request.post("users/retrieve",e).subscribe({next:e=>{const t=this.routeHistory.getPrevious();this.alert.message="Un email vous a ete envoy\xe9",this.alert.switchAlert(),this.router.navigate(["/"+t])},error:e=>{this.alert.message=e.error,this.alert.switchAlert()}})}notSorted(){return 0}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.qu),o.Y36(u.s),o.Y36(m.c),o.Y36(r.F0),o.Y36(c.H))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-retrieve-password"]],decls:10,vars:9,consts:[[1,"user"],[3,"formGroup","submit"],["class","user_formRepeat",4,"ngFor","ngForOf"],[1,"user_validSpinn"],[3,"size","isDisplayed"],[3,"type","disabled"],[1,"user_formRepeat"],["placeholder","Entrez votre email",3,"parentForm","parentControlName","width","type","solo"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h2"),o._uU(2,"R\xe9cuperer son password"),o.qZA(),o.TgZ(3,"form",1),o.NdJ("submit",function(){return t.onSubmit()}),o.YNc(4,v,4,8,"div",2),o.ALo(5,"keyvalue"),o.TgZ(6,"div",3),o._UZ(7,"reg-spinner",4),o.TgZ(8,"reg-button",5),o._uU(9,"R\xe9cuperer"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("formGroup",t.retrieveForm),o.xp6(1),o.Q6J("ngForOf",o.xi3(5,6,t.htmlLoginForm,t.notSorted)),o.xp6(3),o.Q6J("size",20)("isDisplayed",t.isLoading),o.xp6(1),o.Q6J("type","submit")("disabled",!t.retrieveForm.valid))},directives:[l._Y,l.JL,l.sg,n.sg,p.q,g.m,f.H],pipes:[n.Nd],styles:["[_ngcontent-%COMP%]:root{--game-size:400px}@media screen and (max-width: 800px){[_ngcontent-%COMP%]:root{--game-size:100%}}.user[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px}.user_validSpinn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:relative}.user[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#4bc0b8;border-radius:5px;padding:10px;display:flex;flex-direction:column;align-items:flex-sa}.user[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px}"]}),e})();var _=i(1836);function k(e,t){if(1&e&&(o.TgZ(0,"div",6),o.TgZ(1,"label"),o._uU(2),o.qZA(),o._UZ(3,"reg-input",7),o.qZA()),2&e){const e=t.$implicit,i=t.index,n=o.oxw();o.xp6(1),o.uIk("for",e.key),o.xp6(1),o.Oqu(n.label[i]),o.xp6(1),o.Q6J("parentForm",n.subForm)("parentControlName",e.key)("width",200)("type","password"===e.key||"confirmPassword"===e.key?"password":"text")("solo","password"!==e.key&&"confirmPassword"!==e.key),o.uIk("id",e.key)}}const P=[{path:"subscribe",component:(()=>{class e{constructor(e,t,i,n){this.fb=e,this.request=t,this.router=i,this.alert=n,this.subForm=this.fb.group({username:["",[l.kI.required,l.kI.minLength(2)]],email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required,l.kI.minLength(6)]],confirmPassword:["",[l.kI.required,l.kI.minLength(6)]]},{validator:_.t}),this.label=["Nom d'utilisateur","Email","Mot de passe","Confirmation mot de passe"],this.formList={},this.isLoading=!1}unsorted(){return 0}onSubmit(){this.isLoading=!0;const e=Object.assign({},this.subForm.value);for(const t in e)e[t]=e[t].trim();this.request.post("users",e).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/user/login"])},error:e=>{this.alert.message=e.error,this.alert.switchAlert()}})}ngOnInit(){this.formList=Object.assign({},this.subForm.value)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.qu),o.Y36(u.s),o.Y36(r.F0),o.Y36(m.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-subscribe"]],decls:9,vars:10,consts:[[1,"subscribe"],[3,"formGroup","submit"],["class","subscribe_formRepeat",4,"ngFor","ngForOf"],[1,"subscribe_validSpinn"],[3,"size","isDisplayed"],[3,"label","disabled","type"],[1,"subscribe_formRepeat"],[3,"parentForm","parentControlName","width","type","solo"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h2"),o._uU(2,"S'inscrire"),o.qZA(),o.TgZ(3,"form",1),o.NdJ("submit",function(){return t.onSubmit()}),o.YNc(4,k,4,8,"div",2),o.ALo(5,"keyvalue"),o.TgZ(6,"div",3),o._UZ(7,"reg-spinner",4),o._UZ(8,"reg-button",5),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("formGroup",t.subForm),o.xp6(1),o.Q6J("ngForOf",o.xi3(5,7,t.formList,t.unsorted)),o.xp6(3),o.Q6J("size",20)("isDisplayed",t.isLoading),o.xp6(1),o.Q6J("label","Envoyer")("disabled",!t.subForm.valid)("type","submit"))},directives:[l._Y,l.JL,l.sg,n.sg,p.q,g.m,f.H],pipes:[n.Nd],styles:["[_ngcontent-%COMP%]:root{--game-size:400px}@media screen and (max-width: 800px){[_ngcontent-%COMP%]:root{--game-size:100%}}.subscribe[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.subscribe[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px}.subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#4bc0b8;border-radius:5px;padding:10px;display:flex;flex-direction:column;align-items:flex-sa}.subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px}.subscribe_validSpinn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:relative}"]}),e})(),data:{animation:"subscribe"}},{path:"retrieve",component:w,data:{animation:"retrieve"}},{path:"change-password/:token",component:x.A,data:{animation:"change-password"}},{path:"login",component:y,data:{animation:"login"}},{path:"profile",loadChildren:()=>(0,s.mG)(void 0,void 0,void 0,function*(){return(yield i.e(99).then(i.bind(i,4099))).ProfileModule}),canActivate:[d],data:{animation:"Profile"}}];let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.Bz.forChild(P)],r.Bz]}),e})();var Z=i(6684);let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.ez,O,Z.m]]}),e})()}}]);